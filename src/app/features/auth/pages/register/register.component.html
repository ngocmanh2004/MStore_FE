<div class="auth-card">
  <div class="auth-header">
    <a routerLink="/" class="auth-logo">MStore</a>
    <h2>Đăng ký</h2>
    <p>Tạo tài khoản mới để bắt đầu mua sắm!</p>
  </div>

  <form #registerForm="ngForm" (ngSubmit)="onSubmit(registerForm)" class="auth-form">
    
    <div class="form-row">
      <div class="form-group">
        <label for="lastName">Họ</label>
        <input type="text" id="lastName" name="lastName" placeholder="Nhập họ" 
               ngModel required #lastNameInput="ngModel" class="form-control"
               [class.is-invalid]="lastNameInput.invalid && lastNameInput.touched">
      </div>
      <div class="form-group">
        <label for="firstName">Tên</label>
        <input type="text" id="firstName" name="firstName" placeholder="Nhập tên" 
               ngModel required #firstNameInput="ngModel" class="form-control"
               [class.is-invalid]="firstNameInput.invalid && firstNameInput.touched">
      </div>
    </div>
     <div *ngIf="(lastNameInput.invalid && lastNameInput.touched) || (firstNameInput.invalid && firstNameInput.touched)" class="invalid-feedback full-width">
         Vui lòng nhập đầy đủ họ và tên.
      </div>

    <div class="form-group full-width">
      <label for="email">Email</label>
      <input type="email" id="email" name="email" placeholder="Nhập email" 
             ngModel required email #emailInput="ngModel" class="form-control"
             [class.is-invalid]="emailInput.invalid && emailInput.touched">
       <div *ngIf="emailInput.invalid && emailInput.touched" class="invalid-feedback">
         Vui lòng nhập email hợp lệ.
      </div>
    </div>

    <div class="form-group full-width">
      <label for="phone">Số điện thoại</label>
      <input type="tel" id="phone" name="phone" placeholder="Nhập số điện thoại" 
             ngModel required pattern="[0-9]{10}" #phoneInput="ngModel" class="form-control"
             [class.is-invalid]="phoneInput.invalid && phoneInput.touched">
      <div *ngIf="phoneInput.invalid && phoneInput.touched" class="invalid-feedback">
         Số điện thoại phải có 10 chữ số.
      </div>
    </div>

    <div class="form-group full-width">
      <label for="password">Mật khẩu</label>
      <div class="password-wrapper">
         <input 
              [type]="passwordVisible ? 'text' : 'password'" 
              id="password" name="password" placeholder="Nhập mật khẩu" 
              ngModel required minlength="6" #passwordInput="ngModel" class="form-control"
              [class.is-invalid]="passwordInput.invalid && passwordInput.touched">
         <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
             <i class="bi" [ngClass]="passwordVisible ? 'bi-eye-slash' : 'bi-eye'"></i>
         </button>
      </div>
       <div *ngIf="passwordInput.invalid && passwordInput.touched" class="invalid-feedback">
         Mật khẩu phải có ít nhất 6 ký tự.
      </div>
    </div>

     <div class="form-group full-width">
      <label for="confirmPassword">Xác nhận mật khẩu</label>
      <div class="password-wrapper">
         <input 
              [type]="confirmPasswordVisible ? 'text' : 'password'" 
              id="confirmPassword" name="confirmPassword" placeholder="Nhập lại mật khẩu" 
              ngModel required #confirmPasswordInput="ngModel"
              [class.is-invalid]="(confirmPasswordInput.invalid || registerForm.value.password !== registerForm.value.confirmPassword) && confirmPasswordInput.touched">
         <button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()">
            <i class="bi" [ngClass]="confirmPasswordVisible ? 'bi-eye-slash' : 'bi-eye'"></i>
         </button>
      </div>
      <div *ngIf="(confirmPasswordInput.invalid || registerForm.value.password !== registerForm.value.confirmPassword) && confirmPasswordInput.touched" class="invalid-feedback">
         Mật khẩu không khớp hoặc không hợp lệ.
      </div>
    </div>

    <div class="form-group terms">
       <input type="checkbox" id="terms" name="terms" ngModel required #termsInput="ngModel">
       <label for="terms">Tôi đồng ý với <a href="#">Điều khoản sử dụng</a> và <a href="#">Chính sách bảo mật</a></label>
       <div *ngIf="termsInput.invalid && termsInput.touched" class="invalid-feedback">
         Bạn phải đồng ý với điều khoản.
       </div>
    </div>

    <button type="submit" class="btn btn-primary btn-submit" [disabled]="registerForm.invalid">
      <i class="bi bi-person-plus-fill"></i> Đăng ký
    </button>
  </form>

  <div class="auth-footer">
    Đã có tài khoản? <a routerLink="/auth/login">Đăng nhập ngay</a>
  </div>
</div>